# Add an alias to zsh/extra, so that it's not version controlled and can
# be used in a workstation-specific way.
add-alias() {
  echo "alias $1=\"$2\"" >> "$DOTFILES/zsh/extra"
  source ~/.zshrc
}


# Create a directory and cd into it.
md() {
  mkdir -p "$1" && cd "$1"
}


# Bring a branch to the current branch.
# This functions checkouts to $1 and does a rebase against the current branch.
# Then it checkouts back to the current branch.
bring-branch-here() {
  # Save the current branch.
  _current_branch=$(git symbolic-ref -q HEAD | sed -e 's|^refs/heads/||')

  command git checkout $1

  # Rebase $1 against the current branch and checkout back.
  command git rebase $_current_branch
  command git checkout $_current_branch
}

# Open a file with $EDITOR in a vertical tmux pane.
# Usage:
# $ vt file.rb
vp() {
  # Exit if tmux is not installed.
  if ! type tmux >/dev/null 2>&1; then
    echo "Sorry, I couldn't find tmux."
    return 1
  fi

  # If we aren't in a tmux session, exit.
  if [[ -z $TMUX ]]; then
    echo "Sorry, you don't appear to be in a tmux session."
    return 1
  fi

  _pwd=$(pwd)

  tmux split-window -h
  tmux send-keys "cd $_pwd" C-m
  tmux send-keys "vim $1" C-m
}


# Use git in a cooler way: 'git' without arguments is 'git 'status'.
git() {
  if ! type git >/dev/null 2>&1; then
    echo "Ooops, seems like you don't have git installed."
    return 1
  fi

  if [[ $# > 0 ]]; then
    command git $@
  else
    command git status
  fi
}
